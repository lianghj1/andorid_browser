# andorid_browser
# 项目简介：
* 浏览功能
	本系统支持基本的浏览功能，能够在线浏览网页、图片、音频、视频等资源。
* 搜索功能
	本系统的主页为自制的一个html页面，里面有一个搜索栏及“搜索”按钮，可供用户输入相关信息后进入搜索，搜索引擎为百度。网址栏输入网址直接跳转页面，输入搜索内容调用百度搜索引擎搜索内容。
* 书签和添加书签功能
    当用户点击添加“书签”按钮时，将会弹出一个悬浮窗，其中已自动填充当前页面的标题以及网址链接，用户可以根据自己的需求去修改标题，但网址链接不能修改。
* 历史记录功能
	当用户在浏览页面时，系统会将除了主页及错误提示页之外的所有加载完成的页面都添加到历史记录中。当用户点击“历史记录”按钮时，系统会切换到历史记录页面，其中显示着每个历史记录的标题信息。
* 下载功能
	本系统内置下载管理工具，支持多文件多线程下载和断点续传，默认为5个下载线程。
* 发送邮件功能
	当用户点击“邮件”按钮时，系统会切换到发送邮件界面。该功能为发送纯文本邮件。

# 功能概述
* 浏览功能
	本系统支持基本的浏览功能，能够在线浏览网页、图片、音频、视频等资源。另外还具有前进、后退、多功能菜单、返回“主页”按钮，用以控制页面。点击“后退”按钮的时候，不会因为页面经过重定向而造成无法后退的问题。同时，页面前进后退都是加载缓存页面，而不是重新加载页面，优化了用户的体验。在加载页面的时候还增加了超时提醒的功能，超时时间为15秒，当页面加载超过15秒时若加载进度低于50%，则停止加载页面，并转为加载程序内部超时提醒的html页面。
	若当前页面为主页，且用户点击手机返回键时，系统底部会浮现一条提示信息，提示用户再点击一次返回键则退出程序。若当前不是主页，点击手机返回键或系统内置的“后退”按钮，则会回到上一页面。当无法前进或后退时，“前进”按钮或“后退”按钮的背景颜色会变浅，且不响应点击操作。当当前为主页时，“主页”按钮也不响应点击操作。
	当点击多功能菜单按钮时，会弹出一个悬浮的多功能菜单，菜单包括“书签”，“添加书签”，“历史记录”，“发送邮件”，“下载”，“退出”功能，点击相应的按钮会执行相应的操作。

* 搜索功能
	本系统的主页为自制的一个html页面，里面有一个搜索栏及“搜索”按钮，可供用户输入相关信息后进入搜索，搜索引擎为百度。系统界面最上方为网址栏及“搜索”按钮，其中网址栏在未获取焦点时显示的是当前页面的标题；当获取到焦点时，网址栏显示的是当前页面的网址链接，且点击时系统会自动选择该链接，以便用户进行复制、删除等操作。
	在主页的搜索栏输入并点击“搜索”按钮时，系统只会调用百度引擎去搜索资源；在网址栏输入内容并点击“搜索”按钮时，系统会粗略判断当前的输入是否符合网址的格式，若不符合，则表示用户输入的内容的目的是搜索，调用百度引擎去搜索该资源；若符合，则再判断当前用户的输入是否包括协议，默认补充为HTTP协议，最后再加载该网页。
	当用户在网址栏上输入内容时，系统会根据用户的输入去从书签、历史记录中去查找匹配到的网址，并将匹配到的信息显示出来供用户选择。系统优先显示书签的内容，且最多显示十条相关的网址信息，且网址信息不会重复出现。被显示的信息包括系统内置的logo、网址标题以及网址链接，让用户能够清晰地选择自己想要的网址，优化用户体验。当用户点击弹出的信息中的某一个时，系统将加载到该页面。

* 书签以及添加书签功能
	当用户点击“添加书签”按钮时，将会弹出一个悬浮窗，其中已自动填充当前页面的标题以及网址链接，用户可以根据自己的需求去修改标题，但网址链接不能修改。若确定要添加书签，用户可以通过点击“添加”按钮添加。否则，可以通过点击“取消”按钮或者按返回键取消操作。
	当用户点击“书签”按钮时，系统将会切换到书签界面，其中显示着每个书签的标题信息，书签的排列顺序按添加顺序从上到下排列，先添加的书签在最上方。当用户点击列表中某一个书签项时，系统将会隐藏书签界面，并打开该书签对应的页面。当用户长按列表中某一个书签项时，系统将会弹出一个提示框，提示用户是否删除该书签。若用户选择“确定”时，删除该书签项，并刷新书签列表。
	
* 历史记录功能
	当用户在浏览页面时，系统会将除了主页及错误提示页之外的所有加载完成的页面都添加到历史记录中。当用户点击“历史记录”按钮时，系统会切换到历史记录页面，其中显示着每个历史记录的标题信息。历史记录的显示与书签的显示相反，时间最为靠近的历史记录将显示在列表最上方。
当用户点击列表中某一个历史记录项时，系统将会隐藏历史记录界面，并打开该记录对应的页面。当用户长按列表中的某一个历史记录项时，系统会弹出一个提示框，提示用户是否删除该历史记录。若用户选择“确定”时，删除该历史记录，并刷新历史记录列表。

* 多任务多线程断点续传下载功能
	本系统内置下载管理工具，支持多线程下载和断点续传，默认为5个下载线程。当用户点击下载资源链接时，系统会自动弹出下载页面，并启动下载。用户也可以通过点击“下载”按钮进入下载界面。下载页面中有两个列表，一个显示当前整个下载的文件列表，另一个显示已下载完毕的文件列表。程序默认将文件保存在内部存储中的目录，若当前目录已有同名文件存在，则自动给新文件名添加数字后缀。
	在“下载中”列表中，显示的是每个文件的文件名、下载状态、下载进度数字显示、下载进度条。用户可以通过点击文件项已切换下载状态（暂停下载或继续下载），也可以通过长按文件项删除文件。当文件下载完毕时，系统会自动将该文件项从“下载中”列表删除，并添加到“已下载”列表。
在“已下载”列表中，显示的是已下载完毕的文件名。当用户点击文件项时，系统会调用手机的软件去打开该文件。若文件不存在时，系统会弹窗提示用户。当用户长按文件项时，系统会弹窗提示用户是否删除文件及记录。

* 发送邮件功能
	当用户点击“邮件”按钮时，系统会切换到发送邮件界面。该功能为发送纯文本邮件。该界面上需要用户填写发件人邮箱、发件人邮箱密码、收件人邮箱、邮件主题及邮件内容。若用户没有将信息填写完毕就点击“发送”按钮，系统会弹出错误提示框，提示用户将内容填写完整。当填写完毕且点击“发送”按钮时，系统会启动一个子线程去执行操作。在子线程中，系统会先判断当前的网络连接，若网络连接不可用，则弹窗提示用户；否则，开始进行发送邮件的预处理。
	在预处理中，系统先通过正则表达式匹配判断发件人及收件人邮箱是否符合邮箱的格式，若不符合，则弹窗提示用户，结束处理；否则，获取发件人邮箱的类型，并进行匹配查找到该邮箱类型对应的SMTP服务器地址。当前，本系统仅支持163邮箱、163企业邮箱、126邮箱、QQ邮箱、QQ企业邮箱、Gmail邮箱。若匹配不到，则弹窗提示用户本系统暂不支持该邮箱类型；否则，开始发送邮件。邮件内容统一为UTF-8编码格式。若发送邮件失败，则弹窗提示用户，请用户检查邮箱及密码是否正确；否则，弹窗提示用户邮件发送成功。
	出于对用户体验的考虑，由于用户可能不止发送一封邮件，因此不管发送成功还是失败，均不会清空当前界面用户的输入。当且仅当用户点击手机返回键或者点击“取消”按钮时，才结束该子程序。
